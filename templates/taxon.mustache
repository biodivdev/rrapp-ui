{{> header}}

<section class="taxon pure-u-1">
  <h2>{{family}}</h2>
  <h1><i>{{scientificNameWithoutAuthorship}}</i> {{scientificNameAuthorship}}</h1>
  <p>
    Synonyms:
    {{#synonyms}}
      <i>{{scientificNameWithoutAuthorship}}</i> {{scientificNameAuthorship}}; 
    {{/synonyms}}
    {{^synonyms}}N/A{{/synonyms}}
  </p>
</section>

<section class='pure-u-1 risks'>
  <h4>{{strings.risk-assessment}}</h4>
  <table class='pure-table'>
    <tr>
      <th>{{strings.category}}</th>
      <th>{{strings.criteria}}</th>
      <th>{{strings.reason}}</th>
    </tr>
    {{#risk-assessment}}
    <tr>
      <td>{{category}}</td>
      <td>{{criteria}}</td>
      <td>{{reason}}</td>
    </tr>
    {{/risk-assessment}}
  </table>
</section>

<section class='pure-u-1 all-stats  taxa-stats'>
  <h4>{{strings.occs-and-points}}</h4>
  <p>{{strings.points-desc}}</p>
  <table class='pure-table'>
    <tr>
      <th>{{strings.total}}</th>
      <td>{{occurrence_count.count}} / {{points.count}}</td>
    </tr>
    <tr>
      <th>{{strings.recent}}</th>
      <td>{{occurrence_count.count_recent}} / {{points.count_recent}}</td>
    </tr>
    <tr>
      <th>{{strings.historic}}</th>
      <td>{{occurrence_count.count_historic}} / {{points.count_historic}}</td>
    </tr>
  </table>
</section>

<section class='pure-u-1 all-stats stats'>
  <h4>{{strings.all-occs}}</h4>
  <table class='pure-table'>
    <tr>
      <th>{{strings.eoo}}</th>
      <td>{{eoo.all.area}}km²</td>
    </tr>
    <tr>
      <th>{{strings.aoo}} ({{aoo.all.cell_size}}km²)</th>
      <td>{{aoo.all.area}}km²</td>
    </tr>
    <tr>
      <th>{{strings.aoo}} ({{aoo-variadic.all.cell_size}}km²)</th>
      <td>{{aoo_variadic.all.area}}km²</td>
    </tr>
    <tr>
      <th>{{strings.clusters}}</th>
      <td>{{clusters.all.count}}</td>
    </tr>
    <tr>
      <th>{{strings.clusters-area}}</th>
      <td>{{clusters.all.area}}km²</td>
    </tr>
  </table>
</section>

<section class='pure-u-1 recent-stats stats'>
  <h4>{{strings.recent-only}}</h4>
  <table class='pure-table'>
    <tr>
      <th>{{strings.eoo}}</th>
      <td>{{eoo_recent.area}}km²</td>
    </tr>
    <tr>
      <th>{{strings.aoo}} ({{aoo.recent.cell_size}}km²)</th>
      <td>{{aoo.recent.area}}km²</td>
    </tr>
    <tr>
      <th>{{strings.aoo}} ({{aoo-variadic.recent.cell_size}}km²)</th>
      <td>{{aoo-variadic.recent.area}}km²</td>
    </tr>
    <tr>
      <th>{{strings.clusters}}</th>
      <td>{{clusters.recent.count}}</td>
    </tr>
    <tr>
      <th>{{strings.clusters-area}}</th>
      <td>{{clusters.recent.area}}km²</td>
    </tr>
  </table>
</section>

<section class='pure-u-1 historic-stats stats'>
  <h4>{{strings.historic-only}}</h4>
  <table class='pure-table'>
    <tr>
      <th>{{strings.eoo}}</th>
      <td>{{eoo.historic.area}}km²</td>
    </tr>
    <tr>
      <th>{{strings.aoo}} ({{aoo.historic.cell_size}}km²)</th>
      <td>{{aoo.historic.area}}km²</td>
    </tr>
    <tr>
      <th>{{strings.aoo}} ({{aoo-variadic.historic.cell_size}}km²)</th>
      <td>{{aoo-variadic.historic.area}}km²</td>
    </tr>
    <tr>
      <th>{{strings.clusters}}</th>
      <td>{{clusters.historic.count}}</td>
    </tr>
    <tr>
      <th>{{strings.clusters-area}}</th>
      <td>{{clusters.historic.area}}km²</td>
    </tr>
  </table>
</section>

<div class="pure-u-1" id='map'></div>

<div id="tables" class="pure-u-1">
  <h3>
    {{strings.occurrences}}:
  </h3>
</div>

<link rel="stylesheet" href="//cdn.jsdelivr.net/leaflet/1.0.0-rc.1/leaflet.css" />
<link rel="stylesheet" href="//cdn.jsdelivr.net/leaflet.markercluster/1.0.0-beta.2.0/MarkerCluster.css" />
<link rel="stylesheet" href="//cdn.jsdelivr.net/leaflet.markercluster/1.0.0-beta.2.0/MarkerCluster.Default.css" />

<script src="//cdn.jsdelivr.net/leaflet/1.0.0-rc.1/leaflet.js" type="text/javascript"></script>
<script src="//cdn.jsdelivr.net/leaflet.markercluster/1.0.0-beta.2.0/leaflet.markercluster.js" type="text/javascript"></script>
<script src="{{base}}/map.js" type="text/javascript"></script>
<script type="text/javascript">
{{%FILTERS}}
  var occurrences = {{{occurrences | json}}};
  var eoo_geojson = {{{eoo.all.geo | geojson}}};
  var eoo_historic_geojson = {{{eoo.historic.geo | geojson}}};
  var eoo_recent_geojson = {{{eoo.recent.geo | geojson}}};
  var aoo_geojson = {{{aoo.all.geo|geojson}}};
  var aoo_historic_geojson = {{{aoo.historic.geo | geojson}}};
  var aoo_recent_geojson = {{{aoo.recent.geo | geojson}}};
  var aoo_variadic_geojson = {{{aoo-variadic.all.geo | geojson}}};
  var aoo_variadic_historic_geojson = {{{aoo-variadic.historic.geo | geojson}}};
  var aoo_variadic_recent_geojson = {{{aoo-variadic.recent.geo | geojson}}};
  var clusters_geojson = {{{clusters.all.geo | geojson}}};
  var clusters_historic_geojson = {{{clusters.historic.geo | geojson}}};
  var clusters_recent_geojson = {{{clusters.recent.geo | geojson}}};
  window.onload=map(occurrences);
</script>

<style type="text/css">
.leaflet-popup-content {
  width: 450px !important;

}
</style>

<section class="pure-u-1 elsewhere">
  <h3>
    {{strings.elsewhere}}:
  </h3>
  <p>
    <a href="http://gbif.org/species/search?q={{taxon.scientificNameWithoutAuthorship}}">GBIF</a>,
    <a href="http://eol.org/search?q={{taxon.scientificNameWithoutAuthorship}}">EOL</a>,
    <a href="http://bionames.org/search/{{taxon.scientificNameWithoutAuthorship}}">BioNames</a>,
    <a href="http://ptp.pensoft.eu/external_details.php?query={{taxon.scientificNameWithoutAuthorship}}">PenSoft</a>.
  </p>
</section>

<script async defer src="https://hypothes.is/embed.js"></script>

{{> footer}}

